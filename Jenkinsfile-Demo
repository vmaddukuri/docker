void runStages(String tag) {

   agent {
   
		dockerfile true
		
		
    
    docker.image(tag).inside("--privileged=true --user root") {
	
				
				stage('Copy the POM file'){

					sh '''
						dir=$(pwd)
						export PATH=$PATH:/opt/gradle/gradle-3.5/bin
						cd $dir && gradle init && chmod +x gradlew && ./gradlew sonarqube			
					'''						
				}

		}
	}
	
node{

	def customImage = docker.build("vijaymaddukuri/maven:latest1")

	imageTag = "vijaymaddukuri/maven:latest"
	runStages(imageTag)
  
}
